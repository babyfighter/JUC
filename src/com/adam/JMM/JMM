
JMM: Java Memory Model
内存模型，是一种概念（约定）

关于JMM的同步约定：
1、线程解锁前，必须把共享变量立刻刷新回主内存
2、线程加锁前，必须读取主内存中的最新值到工作内存中
3、加锁和解锁是同一把锁

线程： 工作内存 主内存
8种操作（4组）：
1、read/load
2、use/assign
3、write/store
4、lock/unlock

Volatile是Java虚拟机提供的轻量级的同步机制：
1、保证可见性
2、不保证原子性
3、禁止指令重排:
    内存屏障。CPU指令：
    1、保证特定的操作的执行顺序
    2、保证某些变量的内存可见性

